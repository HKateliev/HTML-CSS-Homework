{"ast":null,"code":"'use strict';\n\nconst fetchManifest = require('./lib/fetch').manifest;\nconst finalizeManifest = require('./lib/finalize-manifest');\nconst optCheck = require('./lib/util/opt-check');\nconst pinflight = require('promise-inflight');\nconst npa = require('npm-package-arg');\nmodule.exports = manifest;\nfunction manifest(spec, opts) {\n  opts = optCheck(opts);\n  spec = npa(spec, opts.where);\n  const label = [spec.name, spec.saveSpec || spec.fetchSpec, spec.type, opts.cache, opts.registry, opts.scope].join(':');\n  return pinflight(label, () => {\n    const startTime = Date.now();\n    return fetchManifest(spec, opts).then(rawManifest => {\n      return finalizeManifest(rawManifest, spec, opts);\n    }).then(manifest => {\n      if (opts.annotate) {\n        manifest._from = spec.saveSpec || spec.raw;\n        manifest._requested = spec;\n        manifest._spec = spec.raw;\n        manifest._where = opts.where;\n      }\n      const elapsedTime = Date.now() - startTime;\n      opts.log.silly('pacote', `${spec.type} manifest for ${spec.name}@${spec.saveSpec || spec.fetchSpec} fetched in ${elapsedTime}ms`);\n      return manifest;\n    });\n  });\n}","map":{"version":3,"names":["fetchManifest","require","manifest","finalizeManifest","optCheck","pinflight","npa","module","exports","spec","opts","where","label","name","saveSpec","fetchSpec","type","cache","registry","scope","join","startTime","Date","now","then","rawManifest","annotate","_from","raw","_requested","_spec","_where","elapsedTime","log","silly"],"sources":["/Users/hkateliev/node_modules/npm/node_modules/pacote/manifest.js"],"sourcesContent":["'use strict'\n\nconst fetchManifest = require('./lib/fetch').manifest\nconst finalizeManifest = require('./lib/finalize-manifest')\nconst optCheck = require('./lib/util/opt-check')\nconst pinflight = require('promise-inflight')\nconst npa = require('npm-package-arg')\n\nmodule.exports = manifest\nfunction manifest (spec, opts) {\n  opts = optCheck(opts)\n  spec = npa(spec, opts.where)\n\n  const label = [\n    spec.name,\n    spec.saveSpec || spec.fetchSpec,\n    spec.type,\n    opts.cache,\n    opts.registry,\n    opts.scope\n  ].join(':')\n  return pinflight(label, () => {\n    const startTime = Date.now()\n    return fetchManifest(spec, opts).then(rawManifest => {\n      return finalizeManifest(rawManifest, spec, opts)\n    }).then(manifest => {\n      if (opts.annotate) {\n        manifest._from = spec.saveSpec || spec.raw\n        manifest._requested = spec\n        manifest._spec = spec.raw\n        manifest._where = opts.where\n      }\n      const elapsedTime = Date.now() - startTime\n      opts.log.silly('pacote', `${spec.type} manifest for ${spec.name}@${spec.saveSpec || spec.fetchSpec} fetched in ${elapsedTime}ms`)\n      return manifest\n    })\n  })\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,aAAa,GAAGC,OAAO,CAAC,aAAa,CAAC,CAACC,QAAQ;AACrD,MAAMC,gBAAgB,GAAGF,OAAO,CAAC,yBAAyB,CAAC;AAC3D,MAAMG,QAAQ,GAAGH,OAAO,CAAC,sBAAsB,CAAC;AAChD,MAAMI,SAAS,GAAGJ,OAAO,CAAC,kBAAkB,CAAC;AAC7C,MAAMK,GAAG,GAAGL,OAAO,CAAC,iBAAiB,CAAC;AAEtCM,MAAM,CAACC,OAAO,GAAGN,QAAQ;AACzB,SAASA,QAAQA,CAAEO,IAAI,EAAEC,IAAI,EAAE;EAC7BA,IAAI,GAAGN,QAAQ,CAACM,IAAI,CAAC;EACrBD,IAAI,GAAGH,GAAG,CAACG,IAAI,EAAEC,IAAI,CAACC,KAAK,CAAC;EAE5B,MAAMC,KAAK,GAAG,CACZH,IAAI,CAACI,IAAI,EACTJ,IAAI,CAACK,QAAQ,IAAIL,IAAI,CAACM,SAAS,EAC/BN,IAAI,CAACO,IAAI,EACTN,IAAI,CAACO,KAAK,EACVP,IAAI,CAACQ,QAAQ,EACbR,IAAI,CAACS,KAAK,CACX,CAACC,IAAI,CAAC,GAAG,CAAC;EACX,OAAOf,SAAS,CAACO,KAAK,EAAE,MAAM;IAC5B,MAAMS,SAAS,GAAGC,IAAI,CAACC,GAAG,EAAE;IAC5B,OAAOvB,aAAa,CAACS,IAAI,EAAEC,IAAI,CAAC,CAACc,IAAI,CAACC,WAAW,IAAI;MACnD,OAAOtB,gBAAgB,CAACsB,WAAW,EAAEhB,IAAI,EAAEC,IAAI,CAAC;IAClD,CAAC,CAAC,CAACc,IAAI,CAACtB,QAAQ,IAAI;MAClB,IAAIQ,IAAI,CAACgB,QAAQ,EAAE;QACjBxB,QAAQ,CAACyB,KAAK,GAAGlB,IAAI,CAACK,QAAQ,IAAIL,IAAI,CAACmB,GAAG;QAC1C1B,QAAQ,CAAC2B,UAAU,GAAGpB,IAAI;QAC1BP,QAAQ,CAAC4B,KAAK,GAAGrB,IAAI,CAACmB,GAAG;QACzB1B,QAAQ,CAAC6B,MAAM,GAAGrB,IAAI,CAACC,KAAK;MAC9B;MACA,MAAMqB,WAAW,GAAGV,IAAI,CAACC,GAAG,EAAE,GAAGF,SAAS;MAC1CX,IAAI,CAACuB,GAAG,CAACC,KAAK,CAAC,QAAQ,EAAG,GAAEzB,IAAI,CAACO,IAAK,iBAAgBP,IAAI,CAACI,IAAK,IAAGJ,IAAI,CAACK,QAAQ,IAAIL,IAAI,CAACM,SAAU,eAAciB,WAAY,IAAG,CAAC;MACjI,OAAO9B,QAAQ;IACjB,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"script","externalDependencies":[]}