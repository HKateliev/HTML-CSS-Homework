{"ast":null,"code":"module.exports = uidNumber;\n\n// This module calls into get-uid-gid.js, which sets the\n// uid and gid to the supplied argument, in order to find out their\n// numeric value.  This can't be done in the main node process,\n// because otherwise node would be running as that user from this\n// point on.\n\nvar child_process = require(\"child_process\"),\n  path = require(\"path\"),\n  uidSupport = process.getuid && process.setuid,\n  uidCache = {},\n  gidCache = {};\nfunction uidNumber(uid, gid, cb) {\n  if (!uidSupport) return cb();\n  if (typeof cb !== \"function\") cb = gid, gid = null;\n  if (typeof cb !== \"function\") cb = uid, uid = null;\n  if (gid == null) gid = process.getgid();\n  if (uid == null) uid = process.getuid();\n  if (!isNaN(gid)) gid = gidCache[gid] = +gid;\n  if (!isNaN(uid)) uid = uidCache[uid] = +uid;\n  if (uidCache.hasOwnProperty(uid)) uid = uidCache[uid];\n  if (gidCache.hasOwnProperty(gid)) gid = gidCache[gid];\n  if (typeof gid === \"number\" && typeof uid === \"number\") {\n    return process.nextTick(cb.bind(null, null, uid, gid));\n  }\n  var getter = require.resolve(\"./get-uid-gid.js\");\n  child_process.execFile(process.execPath, [getter, uid, gid], function (code, out, stderr) {\n    if (code) {\n      var er = new Error(\"could not get uid/gid\\n\" + stderr);\n      er.code = code;\n      return cb(er);\n    }\n    try {\n      out = JSON.parse(out + \"\");\n    } catch (ex) {\n      return cb(ex);\n    }\n    if (out.error) {\n      var er = new Error(out.error);\n      er.errno = out.errno;\n      return cb(er);\n    }\n    if (isNaN(out.uid) || isNaN(out.gid)) return cb(new Error(\"Could not get uid/gid: \" + JSON.stringify(out)));\n    cb(null, uidCache[uid] = +out.uid, gidCache[gid] = +out.gid);\n  });\n}","map":{"version":3,"names":["module","exports","uidNumber","child_process","require","path","uidSupport","process","getuid","setuid","uidCache","gidCache","uid","gid","cb","getgid","isNaN","hasOwnProperty","nextTick","bind","getter","resolve","execFile","execPath","code","out","stderr","er","Error","JSON","parse","ex","error","errno","stringify"],"sources":["/Users/hkateliev/node_modules/npm/node_modules/uid-number/uid-number.js"],"sourcesContent":["module.exports = uidNumber\n\n// This module calls into get-uid-gid.js, which sets the\n// uid and gid to the supplied argument, in order to find out their\n// numeric value.  This can't be done in the main node process,\n// because otherwise node would be running as that user from this\n// point on.\n\nvar child_process = require(\"child_process\")\n  , path = require(\"path\")\n  , uidSupport = process.getuid && process.setuid\n  , uidCache = {}\n  , gidCache = {}\n\nfunction uidNumber (uid, gid, cb) {\n  if (!uidSupport) return cb()\n  if (typeof cb !== \"function\") cb = gid, gid = null\n  if (typeof cb !== \"function\") cb = uid, uid = null\n  if (gid == null) gid = process.getgid()\n  if (uid == null) uid = process.getuid()\n  if (!isNaN(gid)) gid = gidCache[gid] = +gid\n  if (!isNaN(uid)) uid = uidCache[uid] = +uid\n\n  if (uidCache.hasOwnProperty(uid)) uid = uidCache[uid]\n  if (gidCache.hasOwnProperty(gid)) gid = gidCache[gid]\n\n  if (typeof gid === \"number\" && typeof uid === \"number\") {\n    return process.nextTick(cb.bind(null, null, uid, gid))\n  }\n\n  var getter = require.resolve(\"./get-uid-gid.js\")\n\n  child_process.execFile( process.execPath\n                        , [getter, uid, gid]\n                        , function (code, out, stderr) {\n    if (code) {\n      var er = new Error(\"could not get uid/gid\\n\" + stderr)\n      er.code = code\n      return cb(er)\n    }\n\n    try {\n      out = JSON.parse(out+\"\")\n    } catch (ex) {\n      return cb(ex)\n    }\n\n    if (out.error) {\n      var er = new Error(out.error)\n      er.errno = out.errno\n      return cb(er)\n    }\n\n    if (isNaN(out.uid) || isNaN(out.gid)) return cb(new Error(\n      \"Could not get uid/gid: \"+JSON.stringify(out)))\n\n    cb(null, uidCache[uid] = +out.uid, gidCache[gid] = +out.gid)\n  })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}