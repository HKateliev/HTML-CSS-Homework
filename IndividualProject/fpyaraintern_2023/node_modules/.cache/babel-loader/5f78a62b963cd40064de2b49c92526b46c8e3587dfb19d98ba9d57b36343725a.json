{"ast":null,"code":"'use strict';\n\nvar path = require('path');\nvar moduleName = require('../utils/module-name.js');\nmodule.exports = reportOptionalFailure;\nfunction top(tree) {\n  if (tree.parent) return top(tree.parent);\n  return tree;\n}\nfunction reportOptionalFailure(tree, what, error) {\n  var topTree = top(tree);\n  if (!topTree.warnings) topTree.warnings = [];\n  var id;\n  if (what) {\n    var depVer = tree.package.dependencies && tree.package.dependencies[what];\n    var optDepVer = tree.package.optionalDependencies && tree.package.optionalDependencies[what];\n    var devDepVer = tree.package.devDependencies && tree.package.devDependencies[what];\n    var version = depVer || optDepVer || devDepVer;\n    id = what + (version ? '@' + version : '');\n  } else {\n    id = tree._id || moduleName(tree) + (tree.package.version ? '@' + tree.package.version : '');\n  }\n  var location = path.relative(topTree.path, tree.path);\n  if (what) location = path.join(location, 'node_modules', what);\n  error.optional = id;\n  error.location = location;\n  topTree.warnings.push(error);\n}","map":{"version":3,"names":["path","require","moduleName","module","exports","reportOptionalFailure","top","tree","parent","what","error","topTree","warnings","id","depVer","package","dependencies","optDepVer","optionalDependencies","devDepVer","devDependencies","version","_id","location","relative","join","optional","push"],"sources":["/Users/hkateliev/node_modules/npm/lib/install/report-optional-failure.js"],"sourcesContent":["'use strict'\nvar path = require('path')\nvar moduleName = require('../utils/module-name.js')\n\nmodule.exports = reportOptionalFailure\n\nfunction top (tree) {\n  if (tree.parent) return top(tree.parent)\n  return tree\n}\n\nfunction reportOptionalFailure (tree, what, error) {\n  var topTree = top(tree)\n  if (!topTree.warnings) topTree.warnings = []\n  var id\n  if (what) {\n    var depVer = tree.package.dependencies && tree.package.dependencies[what]\n    var optDepVer = tree.package.optionalDependencies && tree.package.optionalDependencies[what]\n    var devDepVer = tree.package.devDependencies && tree.package.devDependencies[what]\n    var version = depVer || optDepVer || devDepVer\n    id = what + (version ? '@' + version : '')\n  } else {\n    id = tree._id || moduleName(tree) + (tree.package.version ? '@' + tree.package.version : '')\n  }\n  var location = path.relative(topTree.path, tree.path)\n  if (what) location = path.join(location, 'node_modules', what)\n\n  error.optional = id\n  error.location = location\n  topTree.warnings.push(error)\n}\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC1B,IAAIC,UAAU,GAAGD,OAAO,CAAC,yBAAyB,CAAC;AAEnDE,MAAM,CAACC,OAAO,GAAGC,qBAAqB;AAEtC,SAASC,GAAGA,CAAEC,IAAI,EAAE;EAClB,IAAIA,IAAI,CAACC,MAAM,EAAE,OAAOF,GAAG,CAACC,IAAI,CAACC,MAAM,CAAC;EACxC,OAAOD,IAAI;AACb;AAEA,SAASF,qBAAqBA,CAAEE,IAAI,EAAEE,IAAI,EAAEC,KAAK,EAAE;EACjD,IAAIC,OAAO,GAAGL,GAAG,CAACC,IAAI,CAAC;EACvB,IAAI,CAACI,OAAO,CAACC,QAAQ,EAAED,OAAO,CAACC,QAAQ,GAAG,EAAE;EAC5C,IAAIC,EAAE;EACN,IAAIJ,IAAI,EAAE;IACR,IAAIK,MAAM,GAAGP,IAAI,CAACQ,OAAO,CAACC,YAAY,IAAIT,IAAI,CAACQ,OAAO,CAACC,YAAY,CAACP,IAAI,CAAC;IACzE,IAAIQ,SAAS,GAAGV,IAAI,CAACQ,OAAO,CAACG,oBAAoB,IAAIX,IAAI,CAACQ,OAAO,CAACG,oBAAoB,CAACT,IAAI,CAAC;IAC5F,IAAIU,SAAS,GAAGZ,IAAI,CAACQ,OAAO,CAACK,eAAe,IAAIb,IAAI,CAACQ,OAAO,CAACK,eAAe,CAACX,IAAI,CAAC;IAClF,IAAIY,OAAO,GAAGP,MAAM,IAAIG,SAAS,IAAIE,SAAS;IAC9CN,EAAE,GAAGJ,IAAI,IAAIY,OAAO,GAAG,GAAG,GAAGA,OAAO,GAAG,EAAE,CAAC;EAC5C,CAAC,MAAM;IACLR,EAAE,GAAGN,IAAI,CAACe,GAAG,IAAIpB,UAAU,CAACK,IAAI,CAAC,IAAIA,IAAI,CAACQ,OAAO,CAACM,OAAO,GAAG,GAAG,GAAGd,IAAI,CAACQ,OAAO,CAACM,OAAO,GAAG,EAAE,CAAC;EAC9F;EACA,IAAIE,QAAQ,GAAGvB,IAAI,CAACwB,QAAQ,CAACb,OAAO,CAACX,IAAI,EAAEO,IAAI,CAACP,IAAI,CAAC;EACrD,IAAIS,IAAI,EAAEc,QAAQ,GAAGvB,IAAI,CAACyB,IAAI,CAACF,QAAQ,EAAE,cAAc,EAAEd,IAAI,CAAC;EAE9DC,KAAK,CAACgB,QAAQ,GAAGb,EAAE;EACnBH,KAAK,CAACa,QAAQ,GAAGA,QAAQ;EACzBZ,OAAO,CAACC,QAAQ,CAACe,IAAI,CAACjB,KAAK,CAAC;AAC9B"},"metadata":{},"sourceType":"script","externalDependencies":[]}