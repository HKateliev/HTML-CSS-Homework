{"ast":null,"code":"'use strict';\n\nconst ObjectGetOwnPropertyDescriptors = require('object.getownpropertydescriptors');\nconst util = require('util');\nconst timers = require('timers');\nconst kCustomPromisifiedSymbol = util.promisify && util.promisify.custom || Symbol('util.promisify.custom');\n//const kCustomPromisifyArgsSymbol = Symbol('customPromisifyArgs');\n\nfunction promisify(orig) {\n  if (typeof orig !== 'function') {\n    //const errors = require('internal/errors');\n    //throw new errors.TypeError('ERR_INVALID_ARG_TYPE', 'original', 'function');\n    var err = TypeError(`The \"original\" argument must be of type function`);\n    err.code = 'ERR_INVALID_ARG_TYPE';\n    err.name = `TypeError [${err.code}]`;\n    throw err;\n  }\n  if (orig === timers.setTimeout || orig === timers.setImmediate) {\n    const _orig = orig;\n    orig = function () {\n      var args = [];\n      for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n      const _cb = args.pop();\n      const cb = function () {\n        var args = [];\n        for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n        _cb.apply(null, [null].concat(args));\n      };\n      _orig.apply(timers, [cb].concat(args));\n    };\n  }\n  if (orig[kCustomPromisifiedSymbol]) {\n    const fn = orig[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The [util.promisify.custom] property must be ' + 'a function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn,\n      enumerable: false,\n      writable: false,\n      configurable: true\n    });\n    return fn;\n  }\n\n  // Names to create an object from in case the callback receives multiple\n  // arguments, e.g. ['stdout', 'stderr'] for child_process.exec.\n  //const argumentNames = orig[kCustomPromisifyArgsSymbol];\n\n  function fn() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n    let resolve, reject;\n    const promise = new Promise(function (_resolve, _reject) {\n      resolve = _resolve;\n      reject = _reject;\n    });\n    try {\n      orig.apply(this, args.concat(function (err) {\n        var values = [];\n        for (var i = 1; i < arguments.length; i++) values.push(arguments[i]);\n        if (err) {\n          reject(err);\n          //} else if (argumentNames !== undefined && values.length > 1) {\n          //  const obj = {};\n          //  for (var i = 0; i < argumentNames.length; i++)\n          //    obj[argumentNames[i]] = values[i];\n          //  resolve(obj);\n        } else {\n          resolve(values[0]);\n        }\n      }));\n    } catch (err) {\n      reject(err);\n    }\n    return promise;\n  }\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(orig));\n  Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  });\n  return Object.defineProperties(fn, ObjectGetOwnPropertyDescriptors(orig));\n}\npromisify.custom = kCustomPromisifiedSymbol;\nmodule.exports = promisify;","map":{"version":3,"names":["ObjectGetOwnPropertyDescriptors","require","util","timers","kCustomPromisifiedSymbol","promisify","custom","Symbol","orig","err","TypeError","code","name","setTimeout","setImmediate","_orig","args","i","arguments","length","push","_cb","pop","cb","apply","concat","fn","Object","defineProperty","value","enumerable","writable","configurable","resolve","reject","promise","Promise","_resolve","_reject","values","setPrototypeOf","getPrototypeOf","defineProperties","module","exports"],"sources":["/Users/hkateliev/node_modules/npm/node_modules/util-promisify/index.js"],"sourcesContent":["'use strict';\n\nconst ObjectGetOwnPropertyDescriptors = require('object.getownpropertydescriptors');\nconst util = require('util');\nconst timers = require('timers');\n\nconst kCustomPromisifiedSymbol = util.promisify && util.promisify.custom || Symbol('util.promisify.custom');\n//const kCustomPromisifyArgsSymbol = Symbol('customPromisifyArgs');\n\nfunction promisify(orig) {\n  if (typeof orig !== 'function') {\n    //const errors = require('internal/errors');\n    //throw new errors.TypeError('ERR_INVALID_ARG_TYPE', 'original', 'function');\n    var err = TypeError(`The \"original\" argument must be of type function`);\n    err.code = 'ERR_INVALID_ARG_TYPE';\n    err.name = `TypeError [${err.code}]`;\n    throw err\n  }\n\n  if (orig === timers.setTimeout || orig === timers.setImmediate) {\n    const _orig = orig\n    orig = function () {\n      var args = [];\n      for (var i = 0; i < arguments.length; i ++) args.push(arguments[i]);\n      const _cb = args.pop()\n      const cb = function () {\n        var args = [];\n        for (var i = 0; i < arguments.length; i ++) args.push(arguments[i]);\n        _cb.apply(null, [null].concat(args))\n      }\n      _orig.apply(timers, [cb].concat(args))\n    }\n  }\n\n  if (orig[kCustomPromisifiedSymbol]) {\n    const fn = orig[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The [util.promisify.custom] property must be ' +\n                          'a function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  // Names to create an object from in case the callback receives multiple\n  // arguments, e.g. ['stdout', 'stderr'] for child_process.exec.\n  //const argumentNames = orig[kCustomPromisifyArgsSymbol];\n\n  function fn() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i ++) args.push(arguments[i]);\n\n    let resolve, reject;\n    const promise = new Promise(function (_resolve, _reject) {\n      resolve = _resolve;\n      reject = _reject;\n    });\n    try {\n      orig.apply(this, args.concat(function (err) {\n        var values = [];\n        for (var i = 1; i < arguments.length; i++) values.push(arguments[i]);\n        if (err) {\n          reject(err);\n        //} else if (argumentNames !== undefined && values.length > 1) {\n        //  const obj = {};\n        //  for (var i = 0; i < argumentNames.length; i++)\n        //    obj[argumentNames[i]] = values[i];\n        //  resolve(obj);\n        } else {\n          resolve(values[0]);\n        }\n      }));\n    } catch (err) {\n      reject(err);\n    }\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(orig));\n\n  Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(fn, ObjectGetOwnPropertyDescriptors(orig));\n}\n\npromisify.custom = kCustomPromisifiedSymbol;\n\nmodule.exports = promisify;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,+BAA+B,GAAGC,OAAO,CAAC,kCAAkC,CAAC;AACnF,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAMG,wBAAwB,GAAGF,IAAI,CAACG,SAAS,IAAIH,IAAI,CAACG,SAAS,CAACC,MAAM,IAAIC,MAAM,CAAC,uBAAuB,CAAC;AAC3G;;AAEA,SAASF,SAASA,CAACG,IAAI,EAAE;EACvB,IAAI,OAAOA,IAAI,KAAK,UAAU,EAAE;IAC9B;IACA;IACA,IAAIC,GAAG,GAAGC,SAAS,CAAE,kDAAiD,CAAC;IACvED,GAAG,CAACE,IAAI,GAAG,sBAAsB;IACjCF,GAAG,CAACG,IAAI,GAAI,cAAaH,GAAG,CAACE,IAAK,GAAE;IACpC,MAAMF,GAAG;EACX;EAEA,IAAID,IAAI,KAAKL,MAAM,CAACU,UAAU,IAAIL,IAAI,KAAKL,MAAM,CAACW,YAAY,EAAE;IAC9D,MAAMC,KAAK,GAAGP,IAAI;IAClBA,IAAI,GAAG,SAAAA,CAAA,EAAY;MACjB,IAAIQ,IAAI,GAAG,EAAE;MACb,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAG,EAAED,IAAI,CAACI,IAAI,CAACF,SAAS,CAACD,CAAC,CAAC,CAAC;MACnE,MAAMI,GAAG,GAAGL,IAAI,CAACM,GAAG,EAAE;MACtB,MAAMC,EAAE,GAAG,SAAAA,CAAA,EAAY;QACrB,IAAIP,IAAI,GAAG,EAAE;QACb,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAG,EAAED,IAAI,CAACI,IAAI,CAACF,SAAS,CAACD,CAAC,CAAC,CAAC;QACnEI,GAAG,CAACG,KAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAACC,MAAM,CAACT,IAAI,CAAC,CAAC;MACtC,CAAC;MACDD,KAAK,CAACS,KAAK,CAACrB,MAAM,EAAE,CAACoB,EAAE,CAAC,CAACE,MAAM,CAACT,IAAI,CAAC,CAAC;IACxC,CAAC;EACH;EAEA,IAAIR,IAAI,CAACJ,wBAAwB,CAAC,EAAE;IAClC,MAAMsB,EAAE,GAAGlB,IAAI,CAACJ,wBAAwB,CAAC;IACzC,IAAI,OAAOsB,EAAE,KAAK,UAAU,EAAE;MAC5B,MAAM,IAAIhB,SAAS,CAAC,+CAA+C,GAC/C,YAAY,CAAC;IACnC;IACAiB,MAAM,CAACC,cAAc,CAACF,EAAE,EAAEtB,wBAAwB,EAAE;MAClDyB,KAAK,EAAEH,EAAE;MAAEI,UAAU,EAAE,KAAK;MAAEC,QAAQ,EAAE,KAAK;MAAEC,YAAY,EAAE;IAC/D,CAAC,CAAC;IACF,OAAON,EAAE;EACX;;EAEA;EACA;EACA;;EAEA,SAASA,EAAEA,CAAA,EAAG;IACZ,IAAIV,IAAI,GAAG,EAAE;IACb,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAG,EAAED,IAAI,CAACI,IAAI,CAACF,SAAS,CAACD,CAAC,CAAC,CAAC;IAEnE,IAAIgB,OAAO,EAAEC,MAAM;IACnB,MAAMC,OAAO,GAAG,IAAIC,OAAO,CAAC,UAAUC,QAAQ,EAAEC,OAAO,EAAE;MACvDL,OAAO,GAAGI,QAAQ;MAClBH,MAAM,GAAGI,OAAO;IAClB,CAAC,CAAC;IACF,IAAI;MACF9B,IAAI,CAACgB,KAAK,CAAC,IAAI,EAAER,IAAI,CAACS,MAAM,CAAC,UAAUhB,GAAG,EAAE;QAC1C,IAAI8B,MAAM,GAAG,EAAE;QACf,KAAK,IAAItB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,SAAS,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAEsB,MAAM,CAACnB,IAAI,CAACF,SAAS,CAACD,CAAC,CAAC,CAAC;QACpE,IAAIR,GAAG,EAAE;UACPyB,MAAM,CAACzB,GAAG,CAAC;UACb;UACA;UACA;UACA;UACA;QACA,CAAC,MAAM;UACLwB,OAAO,CAACM,MAAM,CAAC,CAAC,CAAC,CAAC;QACpB;MACF,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,OAAO9B,GAAG,EAAE;MACZyB,MAAM,CAACzB,GAAG,CAAC;IACb;IACA,OAAO0B,OAAO;EAChB;EAEAR,MAAM,CAACa,cAAc,CAACd,EAAE,EAAEC,MAAM,CAACc,cAAc,CAACjC,IAAI,CAAC,CAAC;EAEtDmB,MAAM,CAACC,cAAc,CAACF,EAAE,EAAEtB,wBAAwB,EAAE;IAClDyB,KAAK,EAAEH,EAAE;IAAEI,UAAU,EAAE,KAAK;IAAEC,QAAQ,EAAE,KAAK;IAAEC,YAAY,EAAE;EAC/D,CAAC,CAAC;EACF,OAAOL,MAAM,CAACe,gBAAgB,CAAChB,EAAE,EAAE1B,+BAA+B,CAACQ,IAAI,CAAC,CAAC;AAC3E;AAEAH,SAAS,CAACC,MAAM,GAAGF,wBAAwB;AAE3CuC,MAAM,CAACC,OAAO,GAAGvC,SAAS"},"metadata":{},"sourceType":"script","externalDependencies":[]}