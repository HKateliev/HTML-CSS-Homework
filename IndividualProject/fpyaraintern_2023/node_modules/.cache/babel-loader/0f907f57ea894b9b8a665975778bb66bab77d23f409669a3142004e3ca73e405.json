{"ast":null,"code":"'use strict';\n\nvar chain = require('slide').chain;\nvar lifecycle = require('../../utils/lifecycle.js');\nvar packageId = require('../../utils/package-id.js');\nvar prepublishWarning = require('../../utils/warn-deprecated.js')('prepublish-on-install');\nvar moduleStagingPath = require('../module-staging-path.js');\nmodule.exports = function (staging, pkg, log, next) {\n  log.silly('prepublish', packageId(pkg));\n  // TODO: for `npm@5`, change the behavior and remove this warning.\n  // see https://github.com/npm/npm/issues/10074 for details\n  if (pkg.package && pkg.package.scripts && pkg.package.scripts.prepublish) {\n    prepublishWarning(['As of npm@5, `prepublish` scripts are deprecated.', 'Use `prepare` for build steps and `prepublishOnly` for upload-only.', 'See the deprecation note in `npm help scripts` for more information.']);\n  }\n  var buildpath = moduleStagingPath(staging, pkg);\n  chain([[lifecycle, pkg.package, 'prepublish', buildpath], [lifecycle, pkg.package, 'prepare', buildpath]], next);\n};","map":{"version":3,"names":["chain","require","lifecycle","packageId","prepublishWarning","moduleStagingPath","module","exports","staging","pkg","log","next","silly","package","scripts","prepublish","buildpath"],"sources":["/Users/hkateliev/node_modules/npm/lib/install/action/prepare.js"],"sourcesContent":["'use strict'\nvar chain = require('slide').chain\nvar lifecycle = require('../../utils/lifecycle.js')\nvar packageId = require('../../utils/package-id.js')\nvar prepublishWarning = require('../../utils/warn-deprecated.js')('prepublish-on-install')\nvar moduleStagingPath = require('../module-staging-path.js')\n\nmodule.exports = function (staging, pkg, log, next) {\n  log.silly('prepublish', packageId(pkg))\n  // TODO: for `npm@5`, change the behavior and remove this warning.\n  // see https://github.com/npm/npm/issues/10074 for details\n  if (pkg.package && pkg.package.scripts && pkg.package.scripts.prepublish) {\n    prepublishWarning([\n      'As of npm@5, `prepublish` scripts are deprecated.',\n      'Use `prepare` for build steps and `prepublishOnly` for upload-only.',\n      'See the deprecation note in `npm help scripts` for more information.'\n    ])\n  }\n  var buildpath = moduleStagingPath(staging, pkg)\n  chain(\n    [\n      [lifecycle, pkg.package, 'prepublish', buildpath],\n      [lifecycle, pkg.package, 'prepare', buildpath]\n    ],\n    next\n  )\n}\n"],"mappings":"AAAA,YAAY;;AACZ,IAAIA,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC,CAACD,KAAK;AAClC,IAAIE,SAAS,GAAGD,OAAO,CAAC,0BAA0B,CAAC;AACnD,IAAIE,SAAS,GAAGF,OAAO,CAAC,2BAA2B,CAAC;AACpD,IAAIG,iBAAiB,GAAGH,OAAO,CAAC,gCAAgC,CAAC,CAAC,uBAAuB,CAAC;AAC1F,IAAII,iBAAiB,GAAGJ,OAAO,CAAC,2BAA2B,CAAC;AAE5DK,MAAM,CAACC,OAAO,GAAG,UAAUC,OAAO,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;EAClDD,GAAG,CAACE,KAAK,CAAC,YAAY,EAAET,SAAS,CAACM,GAAG,CAAC,CAAC;EACvC;EACA;EACA,IAAIA,GAAG,CAACI,OAAO,IAAIJ,GAAG,CAACI,OAAO,CAACC,OAAO,IAAIL,GAAG,CAACI,OAAO,CAACC,OAAO,CAACC,UAAU,EAAE;IACxEX,iBAAiB,CAAC,CAChB,mDAAmD,EACnD,qEAAqE,EACrE,sEAAsE,CACvE,CAAC;EACJ;EACA,IAAIY,SAAS,GAAGX,iBAAiB,CAACG,OAAO,EAAEC,GAAG,CAAC;EAC/CT,KAAK,CACH,CACE,CAACE,SAAS,EAAEO,GAAG,CAACI,OAAO,EAAE,YAAY,EAAEG,SAAS,CAAC,EACjD,CAACd,SAAS,EAAEO,GAAG,CAACI,OAAO,EAAE,SAAS,EAAEG,SAAS,CAAC,CAC/C,EACDL,IAAI,CACL;AACH,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}