{"ast":null,"code":"'use strict';\n\n/* eslint-disable camelcase */\nmodule.exports = launchSendMetrics;\nvar fs = require('graceful-fs');\nvar child_process = require('child_process');\nif (require.main === module) main();\nfunction launchSendMetrics() {\n  var path = require('path');\n  var npm = require('../npm.js');\n  try {\n    if (!npm.config.get('send-metrics')) return;\n    var cliMetrics = path.join(npm.config.get('cache'), 'anonymous-cli-metrics.json');\n    var targetRegistry = npm.config.get('metrics-registry');\n    fs.statSync(cliMetrics);\n    return runInBackground(__filename, [cliMetrics, targetRegistry]);\n  } catch (ex) {\n    // if the metrics file doesn't exist, don't run\n  }\n}\nfunction runInBackground(js, args, opts) {\n  if (!args) args = [];\n  args.unshift(js);\n  if (!opts) opts = {};\n  opts.stdio = 'ignore';\n  opts.detached = true;\n  var child = child_process.spawn(process.execPath, args, opts);\n  child.unref();\n  return child;\n}\nfunction main() {\n  var sendMetrics = require('./metrics.js').send;\n  var metricsFile = process.argv[2];\n  var metricsRegistry = process.argv[3];\n  sendMetrics(metricsFile, metricsRegistry);\n}","map":{"version":3,"names":["module","exports","launchSendMetrics","fs","require","child_process","main","path","npm","config","get","cliMetrics","join","targetRegistry","statSync","runInBackground","__filename","ex","js","args","opts","unshift","stdio","detached","child","spawn","process","execPath","unref","sendMetrics","send","metricsFile","argv","metricsRegistry"],"sources":["/Users/hkateliev/node_modules/npm/lib/utils/metrics-launch.js"],"sourcesContent":["'use strict'\n/* eslint-disable camelcase */\nmodule.exports = launchSendMetrics\nvar fs = require('graceful-fs')\nvar child_process = require('child_process')\n\nif (require.main === module) main()\n\nfunction launchSendMetrics () {\n  var path = require('path')\n  var npm = require('../npm.js')\n  try {\n    if (!npm.config.get('send-metrics')) return\n    var cliMetrics = path.join(npm.config.get('cache'), 'anonymous-cli-metrics.json')\n    var targetRegistry = npm.config.get('metrics-registry')\n    fs.statSync(cliMetrics)\n    return runInBackground(__filename, [cliMetrics, targetRegistry])\n  } catch (ex) {\n    // if the metrics file doesn't exist, don't run\n  }\n}\n\nfunction runInBackground (js, args, opts) {\n  if (!args) args = []\n  args.unshift(js)\n  if (!opts) opts = {}\n  opts.stdio = 'ignore'\n  opts.detached = true\n  var child = child_process.spawn(process.execPath, args, opts)\n  child.unref()\n  return child\n}\n\nfunction main () {\n  var sendMetrics = require('./metrics.js').send\n  var metricsFile = process.argv[2]\n  var metricsRegistry = process.argv[3]\n\n  sendMetrics(metricsFile, metricsRegistry)\n}\n"],"mappings":"AAAA,YAAY;;AACZ;AACAA,MAAM,CAACC,OAAO,GAAGC,iBAAiB;AAClC,IAAIC,EAAE,GAAGC,OAAO,CAAC,aAAa,CAAC;AAC/B,IAAIC,aAAa,GAAGD,OAAO,CAAC,eAAe,CAAC;AAE5C,IAAIA,OAAO,CAACE,IAAI,KAAKN,MAAM,EAAEM,IAAI,EAAE;AAEnC,SAASJ,iBAAiBA,CAAA,EAAI;EAC5B,IAAIK,IAAI,GAAGH,OAAO,CAAC,MAAM,CAAC;EAC1B,IAAII,GAAG,GAAGJ,OAAO,CAAC,WAAW,CAAC;EAC9B,IAAI;IACF,IAAI,CAACI,GAAG,CAACC,MAAM,CAACC,GAAG,CAAC,cAAc,CAAC,EAAE;IACrC,IAAIC,UAAU,GAAGJ,IAAI,CAACK,IAAI,CAACJ,GAAG,CAACC,MAAM,CAACC,GAAG,CAAC,OAAO,CAAC,EAAE,4BAA4B,CAAC;IACjF,IAAIG,cAAc,GAAGL,GAAG,CAACC,MAAM,CAACC,GAAG,CAAC,kBAAkB,CAAC;IACvDP,EAAE,CAACW,QAAQ,CAACH,UAAU,CAAC;IACvB,OAAOI,eAAe,CAACC,UAAU,EAAE,CAACL,UAAU,EAAEE,cAAc,CAAC,CAAC;EAClE,CAAC,CAAC,OAAOI,EAAE,EAAE;IACX;EAAA;AAEJ;AAEA,SAASF,eAAeA,CAAEG,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAE;EACxC,IAAI,CAACD,IAAI,EAAEA,IAAI,GAAG,EAAE;EACpBA,IAAI,CAACE,OAAO,CAACH,EAAE,CAAC;EAChB,IAAI,CAACE,IAAI,EAAEA,IAAI,GAAG,CAAC,CAAC;EACpBA,IAAI,CAACE,KAAK,GAAG,QAAQ;EACrBF,IAAI,CAACG,QAAQ,GAAG,IAAI;EACpB,IAAIC,KAAK,GAAGnB,aAAa,CAACoB,KAAK,CAACC,OAAO,CAACC,QAAQ,EAAER,IAAI,EAAEC,IAAI,CAAC;EAC7DI,KAAK,CAACI,KAAK,EAAE;EACb,OAAOJ,KAAK;AACd;AAEA,SAASlB,IAAIA,CAAA,EAAI;EACf,IAAIuB,WAAW,GAAGzB,OAAO,CAAC,cAAc,CAAC,CAAC0B,IAAI;EAC9C,IAAIC,WAAW,GAAGL,OAAO,CAACM,IAAI,CAAC,CAAC,CAAC;EACjC,IAAIC,eAAe,GAAGP,OAAO,CAACM,IAAI,CAAC,CAAC,CAAC;EAErCH,WAAW,CAACE,WAAW,EAAEE,eAAe,CAAC;AAC3C"},"metadata":{},"sourceType":"script","externalDependencies":[]}