{"ast":null,"code":"var ProtoList = require('proto-list'),\n  path = require('path'),\n  fs = require('fs'),\n  ini = require('ini'),\n  EE = require('events').EventEmitter,\n  url = require('url'),\n  http = require('http');\nvar exports = module.exports = function () {\n  var args = [].slice.call(arguments),\n    conf = new ConfigChain();\n  while (args.length) {\n    var a = args.shift();\n    if (a) conf.push('string' === typeof a ? json(a) : a);\n  }\n  return conf;\n};\n\n//recursively find a file...\n\nvar find = exports.find = function () {\n  var rel = path.join.apply(null, [].slice.call(arguments));\n  function find(start, rel) {\n    var file = path.join(start, rel);\n    try {\n      fs.statSync(file);\n      return file;\n    } catch (err) {\n      if (path.dirname(start) !== start)\n        // root\n        return find(path.dirname(start), rel);\n    }\n  }\n  return find(__dirname, rel);\n};\nvar parse = exports.parse = function (content, file, type) {\n  content = '' + content;\n  // if we don't know what it is, try json and fall back to ini\n  // if we know what it is, then it must be that.\n  if (!type) {\n    try {\n      return JSON.parse(content);\n    } catch (er) {\n      return ini.parse(content);\n    }\n  } else if (type === 'json') {\n    if (this.emit) {\n      try {\n        return JSON.parse(content);\n      } catch (er) {\n        this.emit('error', er);\n      }\n    } else {\n      return JSON.parse(content);\n    }\n  } else {\n    return ini.parse(content);\n  }\n};\nvar json = exports.json = function () {\n  var args = [].slice.call(arguments).filter(function (arg) {\n    return arg != null;\n  });\n  var file = path.join.apply(null, args);\n  var content;\n  try {\n    content = fs.readFileSync(file, 'utf-8');\n  } catch (err) {\n    return;\n  }\n  return parse(content, file, 'json');\n};\nvar env = exports.env = function (prefix, env) {\n  env = env || process.env;\n  var obj = {};\n  var l = prefix.length;\n  for (var k in env) {\n    if (k.indexOf(prefix) === 0) obj[k.substring(l)] = env[k];\n  }\n  return obj;\n};\nexports.ConfigChain = ConfigChain;\nfunction ConfigChain() {\n  EE.apply(this);\n  ProtoList.apply(this, arguments);\n  this._awaiting = 0;\n  this._saving = 0;\n  this.sources = {};\n}\n\n// multi-inheritance-ish\nvar extras = {\n  constructor: {\n    value: ConfigChain\n  }\n};\nObject.keys(EE.prototype).forEach(function (k) {\n  extras[k] = Object.getOwnPropertyDescriptor(EE.prototype, k);\n});\nConfigChain.prototype = Object.create(ProtoList.prototype, extras);\nConfigChain.prototype.del = function (key, where) {\n  // if not specified where, then delete from the whole chain, scorched\n  // earth style\n  if (where) {\n    var target = this.sources[where];\n    target = target && target.data;\n    if (!target) {\n      return this.emit('error', new Error('not found ' + where));\n    }\n    delete target[key];\n  } else {\n    for (var i = 0, l = this.list.length; i < l; i++) {\n      delete this.list[i][key];\n    }\n  }\n  return this;\n};\nConfigChain.prototype.set = function (key, value, where) {\n  var target;\n  if (where) {\n    target = this.sources[where];\n    target = target && target.data;\n    if (!target) {\n      return this.emit('error', new Error('not found ' + where));\n    }\n  } else {\n    target = this.list[0];\n    if (!target) {\n      return this.emit('error', new Error('cannot set, no confs!'));\n    }\n  }\n  target[key] = value;\n  return this;\n};\nConfigChain.prototype.get = function (key, where) {\n  if (where) {\n    where = this.sources[where];\n    if (where) where = where.data;\n    if (where && Object.hasOwnProperty.call(where, key)) return where[key];\n    return undefined;\n  }\n  return this.list[0][key];\n};\nConfigChain.prototype.save = function (where, type, cb) {\n  if (typeof type === 'function') cb = type, type = null;\n  var target = this.sources[where];\n  if (!target || !(target.path || target.source) || !target.data) {\n    // TODO: maybe save() to a url target could be a PUT or something?\n    // would be easy to swap out with a reddis type thing, too\n    return this.emit('error', new Error('bad save target: ' + where));\n  }\n  if (target.source) {\n    var pref = target.prefix || '';\n    Object.keys(target.data).forEach(function (k) {\n      target.source[pref + k] = target.data[k];\n    });\n    return this;\n  }\n  var type = type || target.type;\n  var data = target.data;\n  if (target.type === 'json') {\n    data = JSON.stringify(data);\n  } else {\n    data = ini.stringify(data);\n  }\n  this._saving++;\n  fs.writeFile(target.path, data, 'utf8', function (er) {\n    this._saving--;\n    if (er) {\n      if (cb) return cb(er);else return this.emit('error', er);\n    }\n    if (this._saving === 0) {\n      if (cb) cb();\n      this.emit('save');\n    }\n  }.bind(this));\n  return this;\n};\nConfigChain.prototype.addFile = function (file, type, name) {\n  name = name || file;\n  var marker = {\n    __source__: name\n  };\n  this.sources[name] = {\n    path: file,\n    type: type\n  };\n  this.push(marker);\n  this._await();\n  fs.readFile(file, 'utf8', function (er, data) {\n    if (er) this.emit('error', er);\n    this.addString(data, file, type, marker);\n  }.bind(this));\n  return this;\n};\nConfigChain.prototype.addEnv = function (prefix, env, name) {\n  name = name || 'env';\n  var data = exports.env(prefix, env);\n  this.sources[name] = {\n    data: data,\n    source: env,\n    prefix: prefix\n  };\n  return this.add(data, name);\n};\nConfigChain.prototype.addUrl = function (req, type, name) {\n  this._await();\n  var href = url.format(req);\n  name = name || href;\n  var marker = {\n    __source__: name\n  };\n  this.sources[name] = {\n    href: href,\n    type: type\n  };\n  this.push(marker);\n  http.request(req, function (res) {\n    var c = [];\n    var ct = res.headers['content-type'];\n    if (!type) {\n      type = ct.indexOf('json') !== -1 ? 'json' : ct.indexOf('ini') !== -1 ? 'ini' : href.match(/\\.json$/) ? 'json' : href.match(/\\.ini$/) ? 'ini' : null;\n      marker.type = type;\n    }\n    res.on('data', c.push.bind(c)).on('end', function () {\n      this.addString(Buffer.concat(c), href, type, marker);\n    }.bind(this)).on('error', this.emit.bind(this, 'error'));\n  }.bind(this)).on('error', this.emit.bind(this, 'error')).end();\n  return this;\n};\nConfigChain.prototype.addString = function (data, file, type, marker) {\n  data = this.parse(data, file, type);\n  this.add(data, marker);\n  return this;\n};\nConfigChain.prototype.add = function (data, marker) {\n  if (marker && typeof marker === 'object') {\n    var i = this.list.indexOf(marker);\n    if (i === -1) {\n      return this.emit('error', new Error('bad marker'));\n    }\n    this.splice(i, 1, data);\n    marker = marker.__source__;\n    this.sources[marker] = this.sources[marker] || {};\n    this.sources[marker].data = data;\n    // we were waiting for this.  maybe emit 'load'\n    this._resolve();\n  } else {\n    if (typeof marker === 'string') {\n      this.sources[marker] = this.sources[marker] || {};\n      this.sources[marker].data = data;\n    }\n    // trigger the load event if nothing was already going to do so.\n    this._await();\n    this.push(data);\n    process.nextTick(this._resolve.bind(this));\n  }\n  return this;\n};\nConfigChain.prototype.parse = exports.parse;\nConfigChain.prototype._await = function () {\n  this._awaiting++;\n};\nConfigChain.prototype._resolve = function () {\n  this._awaiting--;\n  if (this._awaiting === 0) this.emit('load', this);\n};","map":{"version":3,"names":["ProtoList","require","path","fs","ini","EE","EventEmitter","url","http","exports","module","args","slice","call","arguments","conf","ConfigChain","length","a","shift","push","json","find","rel","join","apply","start","file","statSync","err","dirname","__dirname","parse","content","type","JSON","er","emit","filter","arg","readFileSync","env","prefix","process","obj","l","k","indexOf","substring","_awaiting","_saving","sources","extras","constructor","value","Object","keys","prototype","forEach","getOwnPropertyDescriptor","create","del","key","where","target","data","Error","i","list","set","get","hasOwnProperty","undefined","save","cb","source","pref","stringify","writeFile","bind","addFile","name","marker","__source__","_await","readFile","addString","addEnv","add","addUrl","req","href","format","request","res","c","ct","headers","match","on","Buffer","concat","end","splice","_resolve","nextTick"],"sources":["/Users/hkateliev/node_modules/npm/node_modules/config-chain/index.js"],"sourcesContent":["var ProtoList = require('proto-list')\n  , path = require('path')\n  , fs = require('fs')\n  , ini = require('ini')\n  , EE = require('events').EventEmitter\n  , url = require('url')\n  , http = require('http')\n\nvar exports = module.exports = function () {\n  var args = [].slice.call(arguments)\n    , conf = new ConfigChain()\n\n  while(args.length) {\n    var a = args.shift()\n    if(a) conf.push\n          ( 'string' === typeof a\n            ? json(a)\n            : a )\n  }\n\n  return conf\n}\n\n//recursively find a file...\n\nvar find = exports.find = function () {\n  var rel = path.join.apply(null, [].slice.call(arguments))\n\n  function find(start, rel) {\n    var file = path.join(start, rel)\n    try {\n      fs.statSync(file)\n      return file\n    } catch (err) {\n      if(path.dirname(start) !== start) // root\n        return find(path.dirname(start), rel)\n    }\n  }\n  return find(__dirname, rel)\n}\n\nvar parse = exports.parse = function (content, file, type) {\n  content = '' + content\n  // if we don't know what it is, try json and fall back to ini\n  // if we know what it is, then it must be that.\n  if (!type) {\n    try { return JSON.parse(content) }\n    catch (er) { return ini.parse(content) }\n  } else if (type === 'json') {\n    if (this.emit) {\n      try { return JSON.parse(content) }\n      catch (er) { this.emit('error', er) }\n    } else {\n      return JSON.parse(content)\n    }\n  } else {\n    return ini.parse(content)\n  }\n}\n\nvar json = exports.json = function () {\n  var args = [].slice.call(arguments).filter(function (arg) { return arg != null })\n  var file = path.join.apply(null, args)\n  var content\n  try {\n    content = fs.readFileSync(file,'utf-8')\n  } catch (err) {\n    return\n  }\n  return parse(content, file, 'json')\n}\n\nvar env = exports.env = function (prefix, env) {\n  env = env || process.env\n  var obj = {}\n  var l = prefix.length\n  for(var k in env) {\n    if(k.indexOf(prefix) === 0)\n      obj[k.substring(l)] = env[k]\n  }\n\n  return obj\n}\n\nexports.ConfigChain = ConfigChain\nfunction ConfigChain () {\n  EE.apply(this)\n  ProtoList.apply(this, arguments)\n  this._awaiting = 0\n  this._saving = 0\n  this.sources = {}\n}\n\n// multi-inheritance-ish\nvar extras = {\n  constructor: { value: ConfigChain }\n}\nObject.keys(EE.prototype).forEach(function (k) {\n  extras[k] = Object.getOwnPropertyDescriptor(EE.prototype, k)\n})\nConfigChain.prototype = Object.create(ProtoList.prototype, extras)\n\nConfigChain.prototype.del = function (key, where) {\n  // if not specified where, then delete from the whole chain, scorched\n  // earth style\n  if (where) {\n    var target = this.sources[where]\n    target = target && target.data\n    if (!target) {\n      return this.emit('error', new Error('not found '+where))\n    }\n    delete target[key]\n  } else {\n    for (var i = 0, l = this.list.length; i < l; i ++) {\n      delete this.list[i][key]\n    }\n  }\n  return this\n}\n\nConfigChain.prototype.set = function (key, value, where) {\n  var target\n\n  if (where) {\n    target = this.sources[where]\n    target = target && target.data\n    if (!target) {\n      return this.emit('error', new Error('not found '+where))\n    }\n  } else {\n    target = this.list[0]\n    if (!target) {\n      return this.emit('error', new Error('cannot set, no confs!'))\n    }\n  }\n  target[key] = value\n  return this\n}\n\nConfigChain.prototype.get = function (key, where) {\n  if (where) {\n    where = this.sources[where]\n    if (where) where = where.data\n    if (where && Object.hasOwnProperty.call(where, key)) return where[key]\n    return undefined\n  }\n  return this.list[0][key]\n}\n\nConfigChain.prototype.save = function (where, type, cb) {\n  if (typeof type === 'function') cb = type, type = null\n  var target = this.sources[where]\n  if (!target || !(target.path || target.source) || !target.data) {\n    // TODO: maybe save() to a url target could be a PUT or something?\n    // would be easy to swap out with a reddis type thing, too\n    return this.emit('error', new Error('bad save target: '+where))\n  }\n\n  if (target.source) {\n    var pref = target.prefix || ''\n    Object.keys(target.data).forEach(function (k) {\n      target.source[pref + k] = target.data[k]\n    })\n    return this\n  }\n\n  var type = type || target.type\n  var data = target.data\n  if (target.type === 'json') {\n    data = JSON.stringify(data)\n  } else {\n    data = ini.stringify(data)\n  }\n\n  this._saving ++\n  fs.writeFile(target.path, data, 'utf8', function (er) {\n    this._saving --\n    if (er) {\n      if (cb) return cb(er)\n      else return this.emit('error', er)\n    }\n    if (this._saving === 0) {\n      if (cb) cb()\n      this.emit('save')\n    }\n  }.bind(this))\n  return this\n}\n\nConfigChain.prototype.addFile = function (file, type, name) {\n  name = name || file\n  var marker = {__source__:name}\n  this.sources[name] = { path: file, type: type }\n  this.push(marker)\n  this._await()\n  fs.readFile(file, 'utf8', function (er, data) {\n    if (er) this.emit('error', er)\n    this.addString(data, file, type, marker)\n  }.bind(this))\n  return this\n}\n\nConfigChain.prototype.addEnv = function (prefix, env, name) {\n  name = name || 'env'\n  var data = exports.env(prefix, env)\n  this.sources[name] = { data: data, source: env, prefix: prefix }\n  return this.add(data, name)\n}\n\nConfigChain.prototype.addUrl = function (req, type, name) {\n  this._await()\n  var href = url.format(req)\n  name = name || href\n  var marker = {__source__:name}\n  this.sources[name] = { href: href, type: type }\n  this.push(marker)\n  http.request(req, function (res) {\n    var c = []\n    var ct = res.headers['content-type']\n    if (!type) {\n      type = ct.indexOf('json') !== -1 ? 'json'\n           : ct.indexOf('ini') !== -1 ? 'ini'\n           : href.match(/\\.json$/) ? 'json'\n           : href.match(/\\.ini$/) ? 'ini'\n           : null\n      marker.type = type\n    }\n\n    res.on('data', c.push.bind(c))\n    .on('end', function () {\n      this.addString(Buffer.concat(c), href, type, marker)\n    }.bind(this))\n    .on('error', this.emit.bind(this, 'error'))\n\n  }.bind(this))\n  .on('error', this.emit.bind(this, 'error'))\n  .end()\n\n  return this\n}\n\nConfigChain.prototype.addString = function (data, file, type, marker) {\n  data = this.parse(data, file, type)\n  this.add(data, marker)\n  return this\n}\n\nConfigChain.prototype.add = function (data, marker) {\n  if (marker && typeof marker === 'object') {\n    var i = this.list.indexOf(marker)\n    if (i === -1) {\n      return this.emit('error', new Error('bad marker'))\n    }\n    this.splice(i, 1, data)\n    marker = marker.__source__\n    this.sources[marker] = this.sources[marker] || {}\n    this.sources[marker].data = data\n    // we were waiting for this.  maybe emit 'load'\n    this._resolve()\n  } else {\n    if (typeof marker === 'string') {\n      this.sources[marker] = this.sources[marker] || {}\n      this.sources[marker].data = data\n    }\n    // trigger the load event if nothing was already going to do so.\n    this._await()\n    this.push(data)\n    process.nextTick(this._resolve.bind(this))\n  }\n  return this\n}\n\nConfigChain.prototype.parse = exports.parse\n\nConfigChain.prototype._await = function () {\n  this._awaiting++\n}\n\nConfigChain.prototype._resolve = function () {\n  this._awaiting--\n  if (this._awaiting === 0) this.emit('load', this)\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}