{"ast":null,"code":"'use strict';\n\nmodule.exports = isOptional;\nconst isOptDep = require('./is-opt-dep.js');\nconst moduleName = require('../utils/module-name.js');\nfunction isOptional(node, seen) {\n  if (!seen) seen = new Set();\n  // If a node is not required by anything, then we've reached\n  // the top level package.\n  if (seen.has(node) || node.requiredBy.length === 0) {\n    return false;\n  }\n  seen.add(node);\n  const swOptional = node.fromShrinkwrap && node.package._optional;\n  const result = node.requiredBy.every(function (req) {\n    if (req.fakeChild && swOptional) return true;\n    return isOptDep(req, moduleName(node)) || isOptional(req, seen);\n  });\n  seen.delete(node);\n  return result;\n}","map":{"version":3,"names":["module","exports","isOptional","isOptDep","require","moduleName","node","seen","Set","has","requiredBy","length","add","swOptional","fromShrinkwrap","package","_optional","result","every","req","fakeChild","delete"],"sources":["/Users/hkateliev/node_modules/npm/lib/install/is-only-optional.js"],"sourcesContent":["'use strict'\nmodule.exports = isOptional\n\nconst isOptDep = require('./is-opt-dep.js')\nconst moduleName = require('../utils/module-name.js')\n\nfunction isOptional (node, seen) {\n  if (!seen) seen = new Set()\n  // If a node is not required by anything, then we've reached\n  // the top level package.\n  if (seen.has(node) || node.requiredBy.length === 0) {\n    return false\n  }\n  seen.add(node)\n  const swOptional = node.fromShrinkwrap && node.package._optional\n  const result = node.requiredBy.every(function (req) {\n    if (req.fakeChild && swOptional) return true\n    return isOptDep(req, moduleName(node)) || isOptional(req, seen)\n  })\n  seen.delete(node)\n  return result\n}\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,OAAO,GAAGC,UAAU;AAE3B,MAAMC,QAAQ,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAC3C,MAAMC,UAAU,GAAGD,OAAO,CAAC,yBAAyB,CAAC;AAErD,SAASF,UAAUA,CAAEI,IAAI,EAAEC,IAAI,EAAE;EAC/B,IAAI,CAACA,IAAI,EAAEA,IAAI,GAAG,IAAIC,GAAG,EAAE;EAC3B;EACA;EACA,IAAID,IAAI,CAACE,GAAG,CAACH,IAAI,CAAC,IAAIA,IAAI,CAACI,UAAU,CAACC,MAAM,KAAK,CAAC,EAAE;IAClD,OAAO,KAAK;EACd;EACAJ,IAAI,CAACK,GAAG,CAACN,IAAI,CAAC;EACd,MAAMO,UAAU,GAAGP,IAAI,CAACQ,cAAc,IAAIR,IAAI,CAACS,OAAO,CAACC,SAAS;EAChE,MAAMC,MAAM,GAAGX,IAAI,CAACI,UAAU,CAACQ,KAAK,CAAC,UAAUC,GAAG,EAAE;IAClD,IAAIA,GAAG,CAACC,SAAS,IAAIP,UAAU,EAAE,OAAO,IAAI;IAC5C,OAAOV,QAAQ,CAACgB,GAAG,EAAEd,UAAU,CAACC,IAAI,CAAC,CAAC,IAAIJ,UAAU,CAACiB,GAAG,EAAEZ,IAAI,CAAC;EACjE,CAAC,CAAC;EACFA,IAAI,CAACc,MAAM,CAACf,IAAI,CAAC;EACjB,OAAOW,MAAM;AACf"},"metadata":{},"sourceType":"script","externalDependencies":[]}