{"ast":null,"code":"module.exports = ProtoList;\nfunction setProto(obj, proto) {\n  if (typeof Object.setPrototypeOf === \"function\") return Object.setPrototypeOf(obj, proto);else obj.__proto__ = proto;\n}\nfunction ProtoList() {\n  this.list = [];\n  var root = null;\n  Object.defineProperty(this, 'root', {\n    get: function () {\n      return root;\n    },\n    set: function (r) {\n      root = r;\n      if (this.list.length) {\n        setProto(this.list[this.list.length - 1], r);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\nProtoList.prototype = {\n  get length() {\n    return this.list.length;\n  },\n  get keys() {\n    var k = [];\n    for (var i in this.list[0]) k.push(i);\n    return k;\n  },\n  get snapshot() {\n    var o = {};\n    this.keys.forEach(function (k) {\n      o[k] = this.get(k);\n    }, this);\n    return o;\n  },\n  get store() {\n    return this.list[0];\n  },\n  push: function (obj) {\n    if (typeof obj !== \"object\") obj = {\n      valueOf: obj\n    };\n    if (this.list.length >= 1) {\n      setProto(this.list[this.list.length - 1], obj);\n    }\n    setProto(obj, this.root);\n    return this.list.push(obj);\n  },\n  pop: function () {\n    if (this.list.length >= 2) {\n      setProto(this.list[this.list.length - 2], this.root);\n    }\n    return this.list.pop();\n  },\n  unshift: function (obj) {\n    setProto(obj, this.list[0] || this.root);\n    return this.list.unshift(obj);\n  },\n  shift: function () {\n    if (this.list.length === 1) {\n      setProto(this.list[0], this.root);\n    }\n    return this.list.shift();\n  },\n  get: function (key) {\n    return this.list[0][key];\n  },\n  set: function (key, val, save) {\n    if (!this.length) this.push({});\n    if (save && this.list[0].hasOwnProperty(key)) this.push({});\n    return this.list[0][key] = val;\n  },\n  forEach: function (fn, thisp) {\n    for (var key in this.list[0]) fn.call(thisp, key, this.list[0][key]);\n  },\n  slice: function () {\n    return this.list.slice.apply(this.list, arguments);\n  },\n  splice: function () {\n    // handle injections\n    var ret = this.list.splice.apply(this.list, arguments);\n    for (var i = 0, l = this.list.length; i < l; i++) {\n      setProto(this.list[i], this.list[i + 1] || this.root);\n    }\n    return ret;\n  }\n};","map":{"version":3,"names":["module","exports","ProtoList","setProto","obj","proto","Object","setPrototypeOf","__proto__","list","root","defineProperty","get","set","r","length","enumerable","configurable","prototype","keys","k","i","push","snapshot","o","forEach","store","valueOf","pop","unshift","shift","key","val","save","hasOwnProperty","fn","thisp","call","slice","apply","arguments","splice","ret","l"],"sources":["/Users/hkateliev/node_modules/npm/node_modules/proto-list/proto-list.js"],"sourcesContent":["\nmodule.exports = ProtoList\n\nfunction setProto(obj, proto) {\n  if (typeof Object.setPrototypeOf === \"function\")\n    return Object.setPrototypeOf(obj, proto)\n  else\n    obj.__proto__ = proto\n}\n\nfunction ProtoList () {\n  this.list = []\n  var root = null\n  Object.defineProperty(this, 'root', {\n    get: function () { return root },\n    set: function (r) {\n      root = r\n      if (this.list.length) {\n        setProto(this.list[this.list.length - 1], r)\n      }\n    },\n    enumerable: true,\n    configurable: true\n  })\n}\n\nProtoList.prototype =\n  { get length () { return this.list.length }\n  , get keys () {\n      var k = []\n      for (var i in this.list[0]) k.push(i)\n      return k\n    }\n  , get snapshot () {\n      var o = {}\n      this.keys.forEach(function (k) { o[k] = this.get(k) }, this)\n      return o\n    }\n  , get store () {\n      return this.list[0]\n    }\n  , push : function (obj) {\n      if (typeof obj !== \"object\") obj = {valueOf:obj}\n      if (this.list.length >= 1) {\n        setProto(this.list[this.list.length - 1], obj)\n      }\n      setProto(obj, this.root)\n      return this.list.push(obj)\n    }\n  , pop : function () {\n      if (this.list.length >= 2) {\n        setProto(this.list[this.list.length - 2], this.root)\n      }\n      return this.list.pop()\n    }\n  , unshift : function (obj) {\n      setProto(obj, this.list[0] || this.root)\n      return this.list.unshift(obj)\n    }\n  , shift : function () {\n      if (this.list.length === 1) {\n        setProto(this.list[0], this.root)\n      }\n      return this.list.shift()\n    }\n  , get : function (key) {\n      return this.list[0][key]\n    }\n  , set : function (key, val, save) {\n      if (!this.length) this.push({})\n      if (save && this.list[0].hasOwnProperty(key)) this.push({})\n      return this.list[0][key] = val\n    }\n  , forEach : function (fn, thisp) {\n      for (var key in this.list[0]) fn.call(thisp, key, this.list[0][key])\n    }\n  , slice : function () {\n      return this.list.slice.apply(this.list, arguments)\n    }\n  , splice : function () {\n      // handle injections\n      var ret = this.list.splice.apply(this.list, arguments)\n      for (var i = 0, l = this.list.length; i < l; i++) {\n        setProto(this.list[i], this.list[i + 1] || this.root)\n      }\n      return ret\n    }\n  }\n"],"mappings":"AACAA,MAAM,CAACC,OAAO,GAAGC,SAAS;AAE1B,SAASC,QAAQA,CAACC,GAAG,EAAEC,KAAK,EAAE;EAC5B,IAAI,OAAOC,MAAM,CAACC,cAAc,KAAK,UAAU,EAC7C,OAAOD,MAAM,CAACC,cAAc,CAACH,GAAG,EAAEC,KAAK,CAAC,MAExCD,GAAG,CAACI,SAAS,GAAGH,KAAK;AACzB;AAEA,SAASH,SAASA,CAAA,EAAI;EACpB,IAAI,CAACO,IAAI,GAAG,EAAE;EACd,IAAIC,IAAI,GAAG,IAAI;EACfJ,MAAM,CAACK,cAAc,CAAC,IAAI,EAAE,MAAM,EAAE;IAClCC,GAAG,EAAE,SAAAA,CAAA,EAAY;MAAE,OAAOF,IAAI;IAAC,CAAC;IAChCG,GAAG,EAAE,SAAAA,CAAUC,CAAC,EAAE;MAChBJ,IAAI,GAAGI,CAAC;MACR,IAAI,IAAI,CAACL,IAAI,CAACM,MAAM,EAAE;QACpBZ,QAAQ,CAAC,IAAI,CAACM,IAAI,CAAC,IAAI,CAACA,IAAI,CAACM,MAAM,GAAG,CAAC,CAAC,EAAED,CAAC,CAAC;MAC9C;IACF,CAAC;IACDE,UAAU,EAAE,IAAI;IAChBC,YAAY,EAAE;EAChB,CAAC,CAAC;AACJ;AAEAf,SAAS,CAACgB,SAAS,GACjB;EAAE,IAAIH,MAAMA,CAAA,EAAI;IAAE,OAAO,IAAI,CAACN,IAAI,CAACM,MAAM;EAAC,CAAC;EACzC,IAAII,IAAIA,CAAA,EAAI;IACV,IAAIC,CAAC,GAAG,EAAE;IACV,KAAK,IAAIC,CAAC,IAAI,IAAI,CAACZ,IAAI,CAAC,CAAC,CAAC,EAAEW,CAAC,CAACE,IAAI,CAACD,CAAC,CAAC;IACrC,OAAOD,CAAC;EACV,CAAC;EACD,IAAIG,QAAQA,CAAA,EAAI;IACd,IAAIC,CAAC,GAAG,CAAC,CAAC;IACV,IAAI,CAACL,IAAI,CAACM,OAAO,CAAC,UAAUL,CAAC,EAAE;MAAEI,CAAC,CAACJ,CAAC,CAAC,GAAG,IAAI,CAACR,GAAG,CAACQ,CAAC,CAAC;IAAC,CAAC,EAAE,IAAI,CAAC;IAC5D,OAAOI,CAAC;EACV,CAAC;EACD,IAAIE,KAAKA,CAAA,EAAI;IACX,OAAO,IAAI,CAACjB,IAAI,CAAC,CAAC,CAAC;EACrB,CAAC;EACDa,IAAI,EAAG,SAAAA,CAAUlB,GAAG,EAAE;IACpB,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAEA,GAAG,GAAG;MAACuB,OAAO,EAACvB;IAAG,CAAC;IAChD,IAAI,IAAI,CAACK,IAAI,CAACM,MAAM,IAAI,CAAC,EAAE;MACzBZ,QAAQ,CAAC,IAAI,CAACM,IAAI,CAAC,IAAI,CAACA,IAAI,CAACM,MAAM,GAAG,CAAC,CAAC,EAAEX,GAAG,CAAC;IAChD;IACAD,QAAQ,CAACC,GAAG,EAAE,IAAI,CAACM,IAAI,CAAC;IACxB,OAAO,IAAI,CAACD,IAAI,CAACa,IAAI,CAAClB,GAAG,CAAC;EAC5B,CAAC;EACDwB,GAAG,EAAG,SAAAA,CAAA,EAAY;IAChB,IAAI,IAAI,CAACnB,IAAI,CAACM,MAAM,IAAI,CAAC,EAAE;MACzBZ,QAAQ,CAAC,IAAI,CAACM,IAAI,CAAC,IAAI,CAACA,IAAI,CAACM,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,CAACL,IAAI,CAAC;IACtD;IACA,OAAO,IAAI,CAACD,IAAI,CAACmB,GAAG,EAAE;EACxB,CAAC;EACDC,OAAO,EAAG,SAAAA,CAAUzB,GAAG,EAAE;IACvBD,QAAQ,CAACC,GAAG,EAAE,IAAI,CAACK,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAACC,IAAI,CAAC;IACxC,OAAO,IAAI,CAACD,IAAI,CAACoB,OAAO,CAACzB,GAAG,CAAC;EAC/B,CAAC;EACD0B,KAAK,EAAG,SAAAA,CAAA,EAAY;IAClB,IAAI,IAAI,CAACrB,IAAI,CAACM,MAAM,KAAK,CAAC,EAAE;MAC1BZ,QAAQ,CAAC,IAAI,CAACM,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAACC,IAAI,CAAC;IACnC;IACA,OAAO,IAAI,CAACD,IAAI,CAACqB,KAAK,EAAE;EAC1B,CAAC;EACDlB,GAAG,EAAG,SAAAA,CAAUmB,GAAG,EAAE;IACnB,OAAO,IAAI,CAACtB,IAAI,CAAC,CAAC,CAAC,CAACsB,GAAG,CAAC;EAC1B,CAAC;EACDlB,GAAG,EAAG,SAAAA,CAAUkB,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAE;IAC9B,IAAI,CAAC,IAAI,CAAClB,MAAM,EAAE,IAAI,CAACO,IAAI,CAAC,CAAC,CAAC,CAAC;IAC/B,IAAIW,IAAI,IAAI,IAAI,CAACxB,IAAI,CAAC,CAAC,CAAC,CAACyB,cAAc,CAACH,GAAG,CAAC,EAAE,IAAI,CAACT,IAAI,CAAC,CAAC,CAAC,CAAC;IAC3D,OAAO,IAAI,CAACb,IAAI,CAAC,CAAC,CAAC,CAACsB,GAAG,CAAC,GAAGC,GAAG;EAChC,CAAC;EACDP,OAAO,EAAG,SAAAA,CAAUU,EAAE,EAAEC,KAAK,EAAE;IAC7B,KAAK,IAAIL,GAAG,IAAI,IAAI,CAACtB,IAAI,CAAC,CAAC,CAAC,EAAE0B,EAAE,CAACE,IAAI,CAACD,KAAK,EAAEL,GAAG,EAAE,IAAI,CAACtB,IAAI,CAAC,CAAC,CAAC,CAACsB,GAAG,CAAC,CAAC;EACtE,CAAC;EACDO,KAAK,EAAG,SAAAA,CAAA,EAAY;IAClB,OAAO,IAAI,CAAC7B,IAAI,CAAC6B,KAAK,CAACC,KAAK,CAAC,IAAI,CAAC9B,IAAI,EAAE+B,SAAS,CAAC;EACpD,CAAC;EACDC,MAAM,EAAG,SAAAA,CAAA,EAAY;IACnB;IACA,IAAIC,GAAG,GAAG,IAAI,CAACjC,IAAI,CAACgC,MAAM,CAACF,KAAK,CAAC,IAAI,CAAC9B,IAAI,EAAE+B,SAAS,CAAC;IACtD,KAAK,IAAInB,CAAC,GAAG,CAAC,EAAEsB,CAAC,GAAG,IAAI,CAAClC,IAAI,CAACM,MAAM,EAAEM,CAAC,GAAGsB,CAAC,EAAEtB,CAAC,EAAE,EAAE;MAChDlB,QAAQ,CAAC,IAAI,CAACM,IAAI,CAACY,CAAC,CAAC,EAAE,IAAI,CAACZ,IAAI,CAACY,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAACX,IAAI,CAAC;IACvD;IACA,OAAOgC,GAAG;EACZ;AACF,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}