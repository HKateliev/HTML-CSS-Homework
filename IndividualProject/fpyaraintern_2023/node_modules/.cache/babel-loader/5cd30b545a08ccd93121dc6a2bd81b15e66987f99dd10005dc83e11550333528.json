{"ast":null,"code":"module.exports = loadPrefix;\nvar findPrefix = require('find-npm-prefix');\nvar path = require('path');\nfunction loadPrefix(cb) {\n  var cli = this.list[0];\n  Object.defineProperty(this, 'prefix', {\n    set: function (prefix) {\n      var g = this.get('global');\n      this[g ? 'globalPrefix' : 'localPrefix'] = prefix;\n    }.bind(this),\n    get: function () {\n      var g = this.get('global');\n      return g ? this.globalPrefix : this.localPrefix;\n    }.bind(this),\n    enumerable: true\n  });\n  Object.defineProperty(this, 'globalPrefix', {\n    set: function (prefix) {\n      this.set('prefix', prefix);\n    }.bind(this),\n    get: function () {\n      return path.resolve(this.get('prefix'));\n    }.bind(this),\n    enumerable: true\n  });\n  var p;\n  Object.defineProperty(this, 'localPrefix', {\n    set: function (prefix) {\n      p = prefix;\n    },\n    get: function () {\n      return p;\n    },\n    enumerable: true\n  });\n\n  // try to guess at a good node_modules location.\n  // If we are *explicitly* given a prefix on the cli, then\n  // always use that.  otherwise, infer local prefix from cwd.\n  if (Object.prototype.hasOwnProperty.call(cli, 'prefix')) {\n    p = path.resolve(cli.prefix);\n    process.nextTick(cb);\n  } else {\n    findPrefix(process.cwd()).then(found => {\n      p = found;\n      cb();\n    }, cb);\n  }\n}","map":{"version":3,"names":["module","exports","loadPrefix","findPrefix","require","path","cb","cli","list","Object","defineProperty","set","prefix","g","get","bind","globalPrefix","localPrefix","enumerable","resolve","p","prototype","hasOwnProperty","call","process","nextTick","cwd","then","found"],"sources":["/Users/hkateliev/node_modules/npm/lib/config/load-prefix.js"],"sourcesContent":["module.exports = loadPrefix\n\nvar findPrefix = require('find-npm-prefix')\nvar path = require('path')\n\nfunction loadPrefix (cb) {\n  var cli = this.list[0]\n\n  Object.defineProperty(this, 'prefix',\n    {\n      set: function (prefix) {\n        var g = this.get('global')\n        this[g ? 'globalPrefix' : 'localPrefix'] = prefix\n      }.bind(this),\n      get: function () {\n        var g = this.get('global')\n        return g ? this.globalPrefix : this.localPrefix\n      }.bind(this),\n      enumerable: true\n    })\n\n  Object.defineProperty(this, 'globalPrefix',\n    {\n      set: function (prefix) {\n        this.set('prefix', prefix)\n      }.bind(this),\n      get: function () {\n        return path.resolve(this.get('prefix'))\n      }.bind(this),\n      enumerable: true\n    })\n\n  var p\n  Object.defineProperty(this, 'localPrefix',\n    { set: function (prefix) { p = prefix },\n      get: function () { return p },\n      enumerable: true })\n\n  // try to guess at a good node_modules location.\n  // If we are *explicitly* given a prefix on the cli, then\n  // always use that.  otherwise, infer local prefix from cwd.\n  if (Object.prototype.hasOwnProperty.call(cli, 'prefix')) {\n    p = path.resolve(cli.prefix)\n    process.nextTick(cb)\n  } else {\n    findPrefix(process.cwd()).then((found) => {\n      p = found\n      cb()\n    }, cb)\n  }\n}\n"],"mappings":"AAAAA,MAAM,CAACC,OAAO,GAAGC,UAAU;AAE3B,IAAIC,UAAU,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAC3C,IAAIC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAE1B,SAASF,UAAUA,CAAEI,EAAE,EAAE;EACvB,IAAIC,GAAG,GAAG,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC;EAEtBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,QAAQ,EAClC;IACEC,GAAG,EAAE,UAAUC,MAAM,EAAE;MACrB,IAAIC,CAAC,GAAG,IAAI,CAACC,GAAG,CAAC,QAAQ,CAAC;MAC1B,IAAI,CAACD,CAAC,GAAG,cAAc,GAAG,aAAa,CAAC,GAAGD,MAAM;IACnD,CAAC,CAACG,IAAI,CAAC,IAAI,CAAC;IACZD,GAAG,EAAE,YAAY;MACf,IAAID,CAAC,GAAG,IAAI,CAACC,GAAG,CAAC,QAAQ,CAAC;MAC1B,OAAOD,CAAC,GAAG,IAAI,CAACG,YAAY,GAAG,IAAI,CAACC,WAAW;IACjD,CAAC,CAACF,IAAI,CAAC,IAAI,CAAC;IACZG,UAAU,EAAE;EACd,CAAC,CAAC;EAEJT,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,cAAc,EACxC;IACEC,GAAG,EAAE,UAAUC,MAAM,EAAE;MACrB,IAAI,CAACD,GAAG,CAAC,QAAQ,EAAEC,MAAM,CAAC;IAC5B,CAAC,CAACG,IAAI,CAAC,IAAI,CAAC;IACZD,GAAG,EAAE,YAAY;MACf,OAAOT,IAAI,CAACc,OAAO,CAAC,IAAI,CAACL,GAAG,CAAC,QAAQ,CAAC,CAAC;IACzC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACZG,UAAU,EAAE;EACd,CAAC,CAAC;EAEJ,IAAIE,CAAC;EACLX,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,aAAa,EACvC;IAAEC,GAAG,EAAE,SAAAA,CAAUC,MAAM,EAAE;MAAEQ,CAAC,GAAGR,MAAM;IAAC,CAAC;IACrCE,GAAG,EAAE,SAAAA,CAAA,EAAY;MAAE,OAAOM,CAAC;IAAC,CAAC;IAC7BF,UAAU,EAAE;EAAK,CAAC,CAAC;;EAEvB;EACA;EACA;EACA,IAAIT,MAAM,CAACY,SAAS,CAACC,cAAc,CAACC,IAAI,CAAChB,GAAG,EAAE,QAAQ,CAAC,EAAE;IACvDa,CAAC,GAAGf,IAAI,CAACc,OAAO,CAACZ,GAAG,CAACK,MAAM,CAAC;IAC5BY,OAAO,CAACC,QAAQ,CAACnB,EAAE,CAAC;EACtB,CAAC,MAAM;IACLH,UAAU,CAACqB,OAAO,CAACE,GAAG,EAAE,CAAC,CAACC,IAAI,CAAEC,KAAK,IAAK;MACxCR,CAAC,GAAGQ,KAAK;MACTtB,EAAE,EAAE;IACN,CAAC,EAAEA,EAAE,CAAC;EACR;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}