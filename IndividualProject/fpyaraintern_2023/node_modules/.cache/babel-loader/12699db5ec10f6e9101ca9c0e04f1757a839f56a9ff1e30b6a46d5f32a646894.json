{"ast":null,"code":"'use strict';\n\nvar defaultTemplate = {\n  package: {\n    version: '',\n    dependencies: {},\n    devDependencies: {},\n    optionalDependencies: {}\n  },\n  loaded: false,\n  children: [],\n  requiredBy: [],\n  requires: [],\n  missingDeps: {},\n  missingDevDeps: {},\n  phantomChildren: {},\n  path: null,\n  realpath: null,\n  location: null,\n  userRequired: false,\n  save: false,\n  saveSpec: null,\n  isTop: false,\n  fromBundle: false\n};\nfunction isLink(node) {\n  return node && node.isLink;\n}\nfunction isInLink(node) {\n  return node && (node.isInLink || node.isLink);\n}\nvar create = exports.create = function (node, template, isNotTop) {\n  if (!template) template = defaultTemplate;\n  Object.keys(template).forEach(function (key) {\n    if (template[key] != null && typeof template[key] === 'object' && !(template[key] instanceof Array)) {\n      if (!node[key]) node[key] = {};\n      return create(node[key], template[key], true);\n    }\n    if (node[key] != null) return;\n    node[key] = template[key];\n  });\n  if (!isNotTop) {\n    // isLink is true for the symlink and everything inside it.\n    // by contrast, isInLink is true for only the things inside a link\n    if (node.isLink == null) node.isLink = isLink(node.parent);\n    if (node.isInLink == null) node.isInLink = isInLink(node.parent);\n    if (node.fromBundle == null) {\n      node.fromBundle = false;\n    }\n  }\n  return node;\n};\nexports.reset = function (node) {\n  reset(node, new Set());\n};\nfunction reset(node, seen) {\n  if (seen.has(node)) return;\n  seen.add(node);\n  var child = create(node);\n\n  // FIXME: cleaning up after read-package-json's mess =(\n  if (child.package._id === '@') delete child.package._id;\n  child.isTop = false;\n  child.requiredBy = [];\n  child.requires = [];\n  child.missingDeps = {};\n  child.missingDevDeps = {};\n  child.phantomChildren = {};\n  child.location = null;\n  child.children.forEach(function (child) {\n    reset(child, seen);\n  });\n}","map":{"version":3,"names":["defaultTemplate","package","version","dependencies","devDependencies","optionalDependencies","loaded","children","requiredBy","requires","missingDeps","missingDevDeps","phantomChildren","path","realpath","location","userRequired","save","saveSpec","isTop","fromBundle","isLink","node","isInLink","create","exports","template","isNotTop","Object","keys","forEach","key","Array","parent","reset","Set","seen","has","add","child","_id"],"sources":["/Users/hkateliev/node_modules/npm/lib/install/node.js"],"sourcesContent":["'use strict'\n\nvar defaultTemplate = {\n  package: {\n    version: '',\n    dependencies: {},\n    devDependencies: {},\n    optionalDependencies: {}\n  },\n  loaded: false,\n  children: [],\n  requiredBy: [],\n  requires: [],\n  missingDeps: {},\n  missingDevDeps: {},\n  phantomChildren: {},\n  path: null,\n  realpath: null,\n  location: null,\n  userRequired: false,\n  save: false,\n  saveSpec: null,\n  isTop: false,\n  fromBundle: false\n}\n\nfunction isLink (node) {\n  return node && node.isLink\n}\nfunction isInLink (node) {\n  return node && (node.isInLink || node.isLink)\n}\n\nvar create = exports.create = function (node, template, isNotTop) {\n  if (!template) template = defaultTemplate\n  Object.keys(template).forEach(function (key) {\n    if (template[key] != null && typeof template[key] === 'object' && !(template[key] instanceof Array)) {\n      if (!node[key]) node[key] = {}\n      return create(node[key], template[key], true)\n    }\n    if (node[key] != null) return\n    node[key] = template[key]\n  })\n  if (!isNotTop) {\n    // isLink is true for the symlink and everything inside it.\n    // by contrast, isInLink is true for only the things inside a link\n    if (node.isLink == null) node.isLink = isLink(node.parent)\n    if (node.isInLink == null) node.isInLink = isInLink(node.parent)\n    if (node.fromBundle == null) {\n      node.fromBundle = false\n    }\n  }\n  return node\n}\n\nexports.reset = function (node) {\n  reset(node, new Set())\n}\n\nfunction reset (node, seen) {\n  if (seen.has(node)) return\n  seen.add(node)\n  var child = create(node)\n\n  // FIXME: cleaning up after read-package-json's mess =(\n  if (child.package._id === '@') delete child.package._id\n\n  child.isTop = false\n  child.requiredBy = []\n  child.requires = []\n  child.missingDeps = {}\n  child.missingDevDeps = {}\n  child.phantomChildren = {}\n  child.location = null\n\n  child.children.forEach(function (child) { reset(child, seen) })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}