{"ast":null,"code":"var assert = require('assert');\nvar toNerfDart = require('./nerf-dart.js');\nmodule.exports = setCredentialsByURI;\nfunction setCredentialsByURI(uri, c) {\n  assert(uri && typeof uri === 'string', 'registry URL is required');\n  assert(c && typeof c === 'object', 'credentials are required');\n  var nerfed = toNerfDart(uri);\n  if (c.token) {\n    this.set(nerfed + ':_authToken', c.token, 'user');\n    this.del(nerfed + ':_password', 'user');\n    this.del(nerfed + ':username', 'user');\n    this.del(nerfed + ':email', 'user');\n    this.del(nerfed + ':always-auth', 'user');\n  } else if (c.username || c.password || c.email) {\n    assert(c.username, 'must include username');\n    assert(c.password, 'must include password');\n    assert(c.email, 'must include email address');\n    this.del(nerfed + ':_authToken', 'user');\n    var encoded = Buffer.from(c.password, 'utf8').toString('base64');\n    this.set(nerfed + ':_password', encoded, 'user');\n    this.set(nerfed + ':username', c.username, 'user');\n    this.set(nerfed + ':email', c.email, 'user');\n    if (c.alwaysAuth !== undefined) {\n      this.set(nerfed + ':always-auth', c.alwaysAuth, 'user');\n    } else {\n      this.del(nerfed + ':always-auth', 'user');\n    }\n  } else {\n    throw new Error('No credentials to set.');\n  }\n}","map":{"version":3,"names":["assert","require","toNerfDart","module","exports","setCredentialsByURI","uri","c","nerfed","token","set","del","username","password","email","encoded","Buffer","from","toString","alwaysAuth","undefined","Error"],"sources":["/Users/hkateliev/node_modules/npm/lib/config/set-credentials-by-uri.js"],"sourcesContent":["var assert = require('assert')\n\nvar toNerfDart = require('./nerf-dart.js')\n\nmodule.exports = setCredentialsByURI\n\nfunction setCredentialsByURI (uri, c) {\n  assert(uri && typeof uri === 'string', 'registry URL is required')\n  assert(c && typeof c === 'object', 'credentials are required')\n\n  var nerfed = toNerfDart(uri)\n\n  if (c.token) {\n    this.set(nerfed + ':_authToken', c.token, 'user')\n    this.del(nerfed + ':_password', 'user')\n    this.del(nerfed + ':username', 'user')\n    this.del(nerfed + ':email', 'user')\n    this.del(nerfed + ':always-auth', 'user')\n  } else if (c.username || c.password || c.email) {\n    assert(c.username, 'must include username')\n    assert(c.password, 'must include password')\n    assert(c.email, 'must include email address')\n\n    this.del(nerfed + ':_authToken', 'user')\n\n    var encoded = Buffer.from(c.password, 'utf8').toString('base64')\n    this.set(nerfed + ':_password', encoded, 'user')\n    this.set(nerfed + ':username', c.username, 'user')\n    this.set(nerfed + ':email', c.email, 'user')\n\n    if (c.alwaysAuth !== undefined) {\n      this.set(nerfed + ':always-auth', c.alwaysAuth, 'user')\n    } else {\n      this.del(nerfed + ':always-auth', 'user')\n    }\n  } else {\n    throw new Error('No credentials to set.')\n  }\n}\n"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAE9B,IAAIC,UAAU,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAE1CE,MAAM,CAACC,OAAO,GAAGC,mBAAmB;AAEpC,SAASA,mBAAmBA,CAAEC,GAAG,EAAEC,CAAC,EAAE;EACpCP,MAAM,CAACM,GAAG,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE,0BAA0B,CAAC;EAClEN,MAAM,CAACO,CAAC,IAAI,OAAOA,CAAC,KAAK,QAAQ,EAAE,0BAA0B,CAAC;EAE9D,IAAIC,MAAM,GAAGN,UAAU,CAACI,GAAG,CAAC;EAE5B,IAAIC,CAAC,CAACE,KAAK,EAAE;IACX,IAAI,CAACC,GAAG,CAACF,MAAM,GAAG,aAAa,EAAED,CAAC,CAACE,KAAK,EAAE,MAAM,CAAC;IACjD,IAAI,CAACE,GAAG,CAACH,MAAM,GAAG,YAAY,EAAE,MAAM,CAAC;IACvC,IAAI,CAACG,GAAG,CAACH,MAAM,GAAG,WAAW,EAAE,MAAM,CAAC;IACtC,IAAI,CAACG,GAAG,CAACH,MAAM,GAAG,QAAQ,EAAE,MAAM,CAAC;IACnC,IAAI,CAACG,GAAG,CAACH,MAAM,GAAG,cAAc,EAAE,MAAM,CAAC;EAC3C,CAAC,MAAM,IAAID,CAAC,CAACK,QAAQ,IAAIL,CAAC,CAACM,QAAQ,IAAIN,CAAC,CAACO,KAAK,EAAE;IAC9Cd,MAAM,CAACO,CAAC,CAACK,QAAQ,EAAE,uBAAuB,CAAC;IAC3CZ,MAAM,CAACO,CAAC,CAACM,QAAQ,EAAE,uBAAuB,CAAC;IAC3Cb,MAAM,CAACO,CAAC,CAACO,KAAK,EAAE,4BAA4B,CAAC;IAE7C,IAAI,CAACH,GAAG,CAACH,MAAM,GAAG,aAAa,EAAE,MAAM,CAAC;IAExC,IAAIO,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACV,CAAC,CAACM,QAAQ,EAAE,MAAM,CAAC,CAACK,QAAQ,CAAC,QAAQ,CAAC;IAChE,IAAI,CAACR,GAAG,CAACF,MAAM,GAAG,YAAY,EAAEO,OAAO,EAAE,MAAM,CAAC;IAChD,IAAI,CAACL,GAAG,CAACF,MAAM,GAAG,WAAW,EAAED,CAAC,CAACK,QAAQ,EAAE,MAAM,CAAC;IAClD,IAAI,CAACF,GAAG,CAACF,MAAM,GAAG,QAAQ,EAAED,CAAC,CAACO,KAAK,EAAE,MAAM,CAAC;IAE5C,IAAIP,CAAC,CAACY,UAAU,KAAKC,SAAS,EAAE;MAC9B,IAAI,CAACV,GAAG,CAACF,MAAM,GAAG,cAAc,EAAED,CAAC,CAACY,UAAU,EAAE,MAAM,CAAC;IACzD,CAAC,MAAM;MACL,IAAI,CAACR,GAAG,CAACH,MAAM,GAAG,cAAc,EAAE,MAAM,CAAC;IAC3C;EACF,CAAC,MAAM;IACL,MAAM,IAAIa,KAAK,CAAC,wBAAwB,CAAC;EAC3C;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}