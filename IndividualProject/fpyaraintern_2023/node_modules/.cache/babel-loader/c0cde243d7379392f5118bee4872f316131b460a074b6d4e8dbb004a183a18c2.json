{"ast":null,"code":"'use strict';\n\nconst fetchPackument = require('./lib/fetch').packument;\nconst optCheck = require('./lib/util/opt-check');\nconst pinflight = require('promise-inflight');\nconst npa = require('npm-package-arg');\nmodule.exports = packument;\nfunction packument(spec, opts) {\n  opts = optCheck(opts);\n  spec = npa(spec, opts.where);\n  const label = [spec.name, spec.saveSpec || spec.fetchSpec, spec.type, opts.cache, opts.registry, opts.scope].join(':');\n  const startTime = Date.now();\n  return pinflight(label, () => {\n    return fetchPackument(spec, opts);\n  }).then(p => {\n    const elapsedTime = Date.now() - startTime;\n    opts.log.silly('pacote', `${spec.registry ? 'registry' : spec.type} packument for ${spec.name}@${spec.saveSpec || spec.fetchSpec} fetched in ${elapsedTime}ms`);\n    return p;\n  });\n}","map":{"version":3,"names":["fetchPackument","require","packument","optCheck","pinflight","npa","module","exports","spec","opts","where","label","name","saveSpec","fetchSpec","type","cache","registry","scope","join","startTime","Date","now","then","p","elapsedTime","log","silly"],"sources":["/Users/hkateliev/node_modules/npm/node_modules/pacote/packument.js"],"sourcesContent":["'use strict'\n\nconst fetchPackument = require('./lib/fetch').packument\nconst optCheck = require('./lib/util/opt-check')\nconst pinflight = require('promise-inflight')\nconst npa = require('npm-package-arg')\n\nmodule.exports = packument\nfunction packument (spec, opts) {\n  opts = optCheck(opts)\n  spec = npa(spec, opts.where)\n\n  const label = [\n    spec.name,\n    spec.saveSpec || spec.fetchSpec,\n    spec.type,\n    opts.cache,\n    opts.registry,\n    opts.scope\n  ].join(':')\n  const startTime = Date.now()\n  return pinflight(label, () => {\n    return fetchPackument(spec, opts)\n  }).then(p => {\n    const elapsedTime = Date.now() - startTime\n    opts.log.silly('pacote', `${spec.registry ? 'registry' : spec.type} packument for ${spec.name}@${spec.saveSpec || spec.fetchSpec} fetched in ${elapsedTime}ms`)\n    return p\n  })\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,cAAc,GAAGC,OAAO,CAAC,aAAa,CAAC,CAACC,SAAS;AACvD,MAAMC,QAAQ,GAAGF,OAAO,CAAC,sBAAsB,CAAC;AAChD,MAAMG,SAAS,GAAGH,OAAO,CAAC,kBAAkB,CAAC;AAC7C,MAAMI,GAAG,GAAGJ,OAAO,CAAC,iBAAiB,CAAC;AAEtCK,MAAM,CAACC,OAAO,GAAGL,SAAS;AAC1B,SAASA,SAASA,CAAEM,IAAI,EAAEC,IAAI,EAAE;EAC9BA,IAAI,GAAGN,QAAQ,CAACM,IAAI,CAAC;EACrBD,IAAI,GAAGH,GAAG,CAACG,IAAI,EAAEC,IAAI,CAACC,KAAK,CAAC;EAE5B,MAAMC,KAAK,GAAG,CACZH,IAAI,CAACI,IAAI,EACTJ,IAAI,CAACK,QAAQ,IAAIL,IAAI,CAACM,SAAS,EAC/BN,IAAI,CAACO,IAAI,EACTN,IAAI,CAACO,KAAK,EACVP,IAAI,CAACQ,QAAQ,EACbR,IAAI,CAACS,KAAK,CACX,CAACC,IAAI,CAAC,GAAG,CAAC;EACX,MAAMC,SAAS,GAAGC,IAAI,CAACC,GAAG,EAAE;EAC5B,OAAOlB,SAAS,CAACO,KAAK,EAAE,MAAM;IAC5B,OAAOX,cAAc,CAACQ,IAAI,EAAEC,IAAI,CAAC;EACnC,CAAC,CAAC,CAACc,IAAI,CAACC,CAAC,IAAI;IACX,MAAMC,WAAW,GAAGJ,IAAI,CAACC,GAAG,EAAE,GAAGF,SAAS;IAC1CX,IAAI,CAACiB,GAAG,CAACC,KAAK,CAAC,QAAQ,EAAG,GAAEnB,IAAI,CAACS,QAAQ,GAAG,UAAU,GAAGT,IAAI,CAACO,IAAK,kBAAiBP,IAAI,CAACI,IAAK,IAAGJ,IAAI,CAACK,QAAQ,IAAIL,IAAI,CAACM,SAAU,eAAcW,WAAY,IAAG,CAAC;IAC/J,OAAOD,CAAC;EACV,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"script","externalDependencies":[]}